<!DOCTYPE html>
<!-- FormulaeView Framework -->
<!-- Copyright Philipp Grozinger GRAPHITE 2013 -->
<!-- v1.0 -->

<html>
	<head>
		<title>Formulae</title>
		<script type="text/javascript" src="jquery.js"></script>
		<style>
			/* FONTS */
			@font-face {font-family: kefa; src: url('Kefa.ttc');}
			/* GENERAL */
			html {font-family:kefa;}
			body {padding:none;}
			/* TEXT */
			
			/* FRAMEWORK */
			
		</style>
		<script type="text/javascript">
			function getCurrentId(){
				return decodeURIComponent((new RegExp('[?|&]' + 'id' + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null;
			}
			function compileHTML(){
				window.h = "";
				$.ajax({
					url: "articles/" + getCurrentId() + ".xml",
					dataType: "xml",
					success: function(xml) {
						$(xml).children('concept').each(function(){
							$(this).children().each(function(){
								if (this.tagName == 'title'){
									h += "<h1>" + this.textContent + "</h1>";
								}
								else if (this.tagName == 'intro'){
									h += "<header><p>" + this.textContent + "</p></header>";
								}
								else if (this.tagName == 'formula'){
								h += "<div class='formula'>";
								$(this).children().each(function(){
										if (this.tagName == 'maths'){
											h += "<span class='maths'><scr" + "ipt type='math/tex; mode=display'>" + this.textContent + "</scr" + "ipt></span>";
										}
										else if (this.tagName == 'link'){
											// INCLUDE LINK CODE HERE
										}
									});
									h += "</div>";
								}
								else if (this.tagName == 'explain'){
									h += "<p>" + this.textContent + "</p>";
								}
								else if (this.tagName == 'question'){
									h += "<p><i>" + this.textContent + "</i></p>";
								}
								else if (this.tagName == 'example'){
									h += "<section>";
									$(this).children().each(function(){
										if (this.tagName == 'caption'){
											h += "<h2>" + this.textContent + "</h2>";
										}
										else if (this.tagName == 'maths'){
											h += "<span class='maths'><scr" + "ipt type='math/tex; mode=display'>" + this.textContent + "</scr" + "ipt></span>";
										}
										else if (this.tagName == 'annotate'){
											h += "<span class='annotate'>" + this.textContent + "</span>";
										}
									});
									h += "</section>";
								}
								else if (this.tagName == 'conclusion'){
									h += "<footer><p>" + this.textContent + "</p></footer>";
								};
							});
							loadHTML();
						});
					}
				});
			}
			function loadHTML(){
				$(document.body).ready(function() {
					document.body.innerHTML = h;
				});
			}
		</script>
		<script type="text/javascript"
			src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
		</script>
	</head>
	<body>
		<script type="text/javascript">
			compileHTML();
		</script>
	</body>
</html>